# 交互式页面控制使用指南（小白版）

## 🎯 功能说明

这个工具可以帮您**选择性地控制**Facebook页面的自动回复功能，可以选择单个或多个页面进行操作。

## 🚀 快速开始

### 方法1：使用批处理脚本（最简单）⭐

**双击运行**：`一键控制页面.bat`

然后选择 `[1] 交互式控制（推荐 - 可选择页面）`

### 方法2：直接运行Python脚本

```bash
python scripts/tools/control_pages.py
```

## 📋 使用步骤

### 第1步：查看页面列表

运行工具后，会自动显示所有页面的列表：

```
序号     页面名称                         页面ID               状态
----------------------------------------------------------------------
1        我的业务页面                     1234567890123456     ✅ 启用
2        测试页面                         9876543210987654     ❌ 禁用
3        营销页面                         1111111111111111     ✅ 启用
```

### 第2步：选择要操作的页面

系统会提示您选择页面，支持多种方式：

**方式1：选择单个页面**
```
请输入选择: 1
```
选择序号1的页面

**方式2：选择多个页面**
```
请输入选择: 1,3,5
```
选择序号1、3、5的页面

**方式3：选择所有页面**
```
请输入选择: all
```
选择所有页面

**方式4：选择所有已启用的页面**
```
请输入选择: enabled
```
只选择当前已启用的页面

**方式5：选择所有已禁用的页面**
```
请输入选择: disabled
```
只选择当前已禁用的页面

### 第3步：选择操作

选择页面后，选择要执行的操作：

- **[1] 启用选中的页面** - 启用您选中的页面
- **[2] 禁用选中的页面** - 禁用您选中的页面
- **[3] 切换选中页面的状态** - 启用变禁用，禁用变启用
- **[4] 刷新页面列表** - 重新加载页面列表
- **[0] 退出** - 退出工具

## 📝 使用示例

### 示例1：只启用特定页面

1. 运行工具：`python scripts/tools/control_pages.py`
2. 查看页面列表
3. 选择操作：`[1] 启用选中的页面`
4. 选择页面：输入 `1,3`（选择序号1和3的页面）
5. 完成！选中的页面已启用

### 示例2：禁用所有已启用的页面

1. 运行工具
2. 查看页面列表
3. 选择操作：`[2] 禁用选中的页面`
4. 选择页面：输入 `enabled`（选择所有已启用的页面）
5. 完成！所有已启用的页面已禁用

### 示例3：切换特定页面的状态

1. 运行工具
2. 查看页面列表
3. 选择操作：`[3] 切换选中页面的状态`
4. 选择页面：输入 `2`（选择序号2的页面）
5. 完成！如果原来是启用，现在变成禁用；如果原来是禁用，现在变成启用

## 🎯 常见场景

### 场景1：只启用业务页面，禁用测试页面

1. 运行工具
2. 选择操作：`[1] 启用选中的页面`
3. 选择页面：输入业务页面的序号（如：`1`）
4. 选择操作：`[2] 禁用选中的页面`
5. 选择页面：输入测试页面的序号（如：`2`）

### 场景2：批量启用多个页面

1. 运行工具
2. 选择操作：`[1] 启用选中的页面`
3. 选择页面：输入多个序号，用逗号分隔（如：`1,3,5`）

### 场景3：禁用所有已启用的页面（临时维护）

1. 运行工具
2. 选择操作：`[2] 禁用选中的页面`
3. 选择页面：输入 `enabled`

### 场景4：重新启用所有页面

1. 运行工具
2. 选择操作：`[1] 启用选中的页面`
3. 选择页面：输入 `all`

## 🔍 如何获取页面ID

### 方法1：从工具中查看

运行工具后，页面列表会显示所有页面的ID。

### 方法2：从状态查看中获取

```bash
python scripts/tools/manage_pages.py status
```

### 方法3：从日志中获取

当收到消息时，日志中会显示页面ID。

## ⚙️ 其他功能

### 查看页面状态（命令行）

```bash
python scripts/tools/manage_pages.py status
```

### 同步所有页面

```bash
python scripts/tools/manage_pages.py sync
```

### 启用/禁用单个页面（命令行）

```bash
# 启用
python scripts/tools/manage_pages.py enable <页面ID>

# 禁用
python scripts/tools/manage_pages.py disable <页面ID>
```

## 🆘 常见问题

### Q1: 找不到页面？

**A**: 
1. 先运行同步：`python scripts/tools/manage_pages.py sync`
2. 确认Token有 `pages_show_list` 权限

### Q2: 选择页面后没有反应？

**A**: 
1. 确认输入的序号正确
2. 确认页面确实存在
3. 检查配置文件权限

### Q3: 如何查看当前配置？

**A**: 
运行工具后，页面列表会显示每个页面的当前状态（启用/禁用）。

## 📚 相关文档

- **页面自动回复指南**：`docs/guides/PAGE_AUTO_REPLY_GUIDE.md`
- **多页面配置**：`docs/production/MULTI_PAGE_USER_TOKEN_CONFIG.md`

---

**提示**：使用交互式工具最简单，可以选择要操作的页面！🎉

## 🔍 如何获取页面ID

### 方法1：从状态查看中获取

运行 `查看所有页面状态`，会显示所有页面的ID。

### 方法2：从日志中获取

当收到消息时，日志中会显示：
```
页面ID: 1234567890123456
```

### 方法3：从Facebook开发者工具获取

1. 访问：https://developers.facebook.com/tools/explorer/
2. 使用您的访问令牌
3. 调用 `/me/accounts` 接口
4. 在返回结果中找到 `id` 字段

## 📝 使用示例

### 示例1：查看所有页面

```bash
# 使用批处理脚本
双击：一键控制页面.bat
选择：1

# 或使用命令行
python scripts/tools/manage_pages.py status
```

**输出示例**：
```
页面名称                         页面ID                Token   自动回复
----------------------------------------------------------------------
我的业务页面                     1234567890123456     ✅       ✅ 启用
测试页面                         9876543210987654     ✅       ❌ 禁用
```

### 示例2：启用所有页面

```bash
# 使用批处理脚本
双击：一键控制页面.bat
选择：2

# 或使用命令行
python scripts/tools/manage_pages.py enable-all
```

**输出示例**：
```
✅ 已启用: 我的业务页面 (ID: 1234567890123456)
✅ 已启用: 测试页面 (ID: 9876543210987654)
✅ 成功启用 2 个页面的自动回复
```

### 示例3：禁用特定页面

```bash
# 使用批处理脚本
双击：一键控制页面.bat
选择：5
输入：1234567890123456

# 或使用命令行
python scripts/tools/manage_pages.py disable 1234567890123456
```

## 🎯 常见场景

### 场景1：首次设置

1. **同步所有页面**
   ```bash
   python scripts/tools/manage_pages.py sync
   ```
   - 自动获取所有页面
   - 自动启用所有页面的自动回复

2. **查看状态**
   ```bash
   python scripts/tools/manage_pages.py status
   ```
   - 确认所有页面已配置

### 场景2：临时禁用所有自动回复

```bash
python scripts/tools/manage_pages.py disable-all
```

### 场景3：重新启用所有自动回复

```bash
python scripts/tools/manage_pages.py enable-all
```

### 场景4：只启用特定页面

1. 查看所有页面状态，获取页面ID
2. 启用指定页面：
   ```bash
   python scripts/tools/manage_pages.py enable <页面ID>
   ```

## ⚙️ 工作原理

### 配置存储

页面配置保存在：`config/config.yaml`

```yaml
page_settings:
  "1234567890123456":
    auto_reply_enabled: true
    name: "我的业务页面"
  "9876543210987654":
    auto_reply_enabled: false
    name: "测试页面"
```

### 优先级

- **页面配置** > **全局配置**
- 如果页面有单独配置，使用页面配置
- 如果页面没有配置，使用全局配置

## 🆘 常见问题

### Q1: 找不到页面？

**A**: 
1. 先运行同步：`python scripts/tools/manage_pages.py sync`
2. 确认Token有 `pages_show_list` 权限

### Q2: 启用/禁用不生效？

**A**: 
1. 检查配置文件：`config/config.yaml`
2. 确认配置已保存
3. 重启应用服务

### Q3: 如何查看当前配置？

**A**: 
运行状态查看：
```bash
python scripts/tools/manage_pages.py status
```

## 📚 相关文档

- **页面自动回复指南**：`docs/guides/PAGE_AUTO_REPLY_GUIDE.md`
- **多页面配置**：`docs/production/MULTI_PAGE_USER_TOKEN_CONFIG.md`

---

**提示**：使用批处理脚本最简单，双击运行即可！🎉

