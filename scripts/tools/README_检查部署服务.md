25# éƒ¨ç½²åæœåŠ¡è¿è¡Œæƒ…å†µæ£€æŸ¥å·¥å…·ä½¿ç”¨æŒ‡å—

## ğŸ“‹ åŠŸèƒ½è¯´æ˜

è¿™ä¸ªå·¥å…·å¯ä»¥å…¨é¢æ£€æŸ¥Zeaburéƒ¨ç½²åçš„æœåŠ¡è¿è¡Œæƒ…å†µï¼ŒåŒ…æ‹¬ï¼š

- âœ… æœåŠ¡å¥åº·æ£€æŸ¥ï¼ˆç®€å•å’Œå®Œæ•´ï¼‰
- âœ… æ•°æ®åº“è¿æ¥çŠ¶æ€
- âœ… APIç«¯ç‚¹å¯è®¿é—®æ€§
- âœ… æ€§èƒ½æŒ‡æ ‡ï¼ˆè¯·æ±‚æ•°ã€é”™è¯¯ç‡ã€å“åº”æ—¶é—´ï¼‰
- âœ… èµ„æºä½¿ç”¨æƒ…å†µï¼ˆCPUã€å†…å­˜ã€ç£ç›˜ï¼‰
- âœ… éƒ¨ç½²çŠ¶æ€ï¼ˆé¡µé¢é…ç½®ã€TokençŠ¶æ€ï¼‰
- âœ… é”™è¯¯ç»Ÿè®¡å’Œåˆ†ç±»
- âœ… è‡ªåŠ¨è¯Šæ–­å’Œå»ºè®®

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### æ–¹æ³•1ï¼šPythonè„šæœ¬ï¼ˆæ¨è - åŠŸèƒ½æœ€å…¨ï¼‰

#### åŸºæœ¬ä½¿ç”¨

```bash
ä¸
ä½¿ç”¨é»˜è®¤URLï¼š`https://my-telegram-bot33.zeabur.app`

#### æŒ‡å®šURL

```bash
python scripts/tools/check_zeabur_deployment.py --url https://your-app.zeabur.app
```

#### ä¿å­˜JSONæŠ¥å‘Š

```bash
python scripts/tools/check_zeabur_deployment.py --url https://your-app.zeabur.app --save-report
```

#### ç”ŸæˆHTMLæŠ¥å‘Š

```bash
python scripts/tools/check_zeabur_deployment.py --url https://your-app.zeabur.app --html-report
```

#### åŒæ—¶ç”ŸæˆJSONå’ŒHTMLæŠ¥å‘Š

```bash
python scripts/tools/check_zeabur_deployment.py --url https://your-app.zeabur.app --save-report --html-report
```

#### è‡ªå®šä¹‰æŠ¥å‘Šæ–‡ä»¶å

```bash
python scripts/tools/check_zeabur_deployment.py --url https://your-app.zeabur.app --save-report --html-report --report-name my_check_report
```

è¿™å°†ç”Ÿæˆï¼š
- `my_check_report.json`
- `my_check_report.html`

### æ–¹æ³•2ï¼šWindowsæ‰¹å¤„ç†è„šæœ¬ï¼ˆæœ€ç®€å•ï¼‰

#### åŒå‡»è¿è¡Œ

ç›´æ¥åŒå‡» `scripts\tools\check_zeabur_deployment.bat`

#### å‘½ä»¤è¡Œè¿è¡Œ

```cmd
scripts\tools\check_zeabur_deployment.bat
```

**æ³¨æ„**ï¼š
- å¦‚æœå·²å®‰è£…Pythonå’Œhttpxï¼Œä¼šè‡ªåŠ¨ä½¿ç”¨Pythonè„šæœ¬è¿›è¡Œè¯¦ç»†æ£€æŸ¥
- å¦‚æœæœªå®‰è£…Pythonï¼Œä¼šä½¿ç”¨curlè¿›è¡ŒåŸºç¡€æ£€æŸ¥

## ğŸ“Š è¾“å‡ºç¤ºä¾‹

### æ§åˆ¶å°è¾“å‡º

```
============================================================
ğŸ” æ£€æŸ¥Zeaburéƒ¨ç½²çŠ¶æ€: https://my-telegram-bot33.zeabur.app
============================================================

1ï¸âƒ£  æ£€æŸ¥ç®€å•å¥åº·æ£€æŸ¥ç«¯ç‚¹...
   âœ… ç®€å•å¥åº·æ£€æŸ¥
      URL: https://my-telegram-bot33.zeabur.app/health/simple
      çŠ¶æ€ç : 200
      å“åº”æ—¶é—´: 45.23ms
      çŠ¶æ€: ok

2ï¸âƒ£  æ£€æŸ¥å®Œæ•´å¥åº·æ£€æŸ¥ç«¯ç‚¹...
   âœ… å®Œæ•´å¥åº·æ£€æŸ¥
      URL: https://my-telegram-bot33.zeabur.app/health
      çŠ¶æ€ç : 200
      å“åº”æ—¶é—´: 67.89ms
      çŠ¶æ€: healthy
      æ•°æ®åº“: âœ… healthy
      æ•°æ®åº“å“åº”æ—¶é—´: 5.23ms

...

============================================================
ğŸ“Š æ£€æŸ¥æ€»ç»“
============================================================

æ€»è®¡: 8 ä¸ªæ£€æŸ¥
âœ… æˆåŠŸ: 8
âŒ å¤±è´¥: 0
âš ï¸  é”™è¯¯: 0
ğŸ“ˆ æˆåŠŸç‡: 100.0%

============================================================
ğŸ”‘ å…³é”®æ£€æŸ¥ç»“æœ
============================================================

âœ… ç®€å•å¥åº·æ£€æŸ¥: success
âœ… å®Œæ•´å¥åº·æ£€æŸ¥: success
âœ… æ ¹è·¯å¾„: success
âœ… æ•°æ®åº“è¿æ¥: healthy
   å“åº”æ—¶é—´: 5.23ms

============================================================
ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡
============================================================

è¯·æ±‚æ€»æ•°: 1234
é”™è¯¯æ€»æ•°: 5
é”™è¯¯ç‡: 0.41%
å¹³å‡å“åº”æ—¶é—´: 45.67ms
P95å“åº”æ—¶é—´: 120.34ms
è¿è¡Œæ—¶é—´: 2.5 å°æ—¶

============================================================
ğŸ’» èµ„æºä½¿ç”¨
============================================================

CPUä½¿ç”¨ç‡: 15.2%
å†…å­˜ä½¿ç”¨ç‡: 45.8%
ç£ç›˜ä½¿ç”¨ç‡: 32.1%

============================================================
ğŸš€ éƒ¨ç½²çŠ¶æ€
============================================================

é¡µé¢æ€»æ•°: 12
å·²å¯ç”¨: 12
å·²ç¦ç”¨: 0
TokençŠ¶æ€: âœ… å·²é…ç½®

============================================================
ğŸ‰ æ‰€æœ‰æ£€æŸ¥éƒ½é€šè¿‡ï¼æœåŠ¡è¿è¡Œæ­£å¸¸ï¼
============================================================
```

### JSONæŠ¥å‘Šç¤ºä¾‹

```json
{
  "timestamp": "2025-01-15T10:30:00.123456",
  "base_url": "https://my-telegram-bot33.zeabur.app",
  "checks": {
    "health_simple": {
      "name": "ç®€å•å¥åº·æ£€æŸ¥",
      "url": "https://my-telegram-bot33.zeabur.app/health/simple",
      "status": "success",
      "status_code": 200,
      "response_time_ms": 45.23,
      "data": {
        "status": "ok",
        "timestamp": "2025-01-15T10:30:00.000Z"
      }
    },
    ...
  },
  "summary": {
    "total_checks": 8,
    "successful": 8,
    "failed": 0,
    "errors": 0,
    "success_rate": 100.0
  },
  "health_info": {
    "overall_status": "healthy",
    "uptime_seconds": 9000,
    "checks": {
      "database": {
        "status": "healthy",
        "response_time_ms": 5.23
      },
      ...
    }
  },
  "metrics_info": {
    "request_count": 1234,
    "error_count": 5,
    "error_rate_percent": 0.41,
    "avg_response_time_ms": 45.67,
    "p95_response_time_ms": 120.34
  },
  "errors": {
    "total_errors": 0,
    "by_category": {}
  },
  "diagnostics": []
}
```

### HTMLæŠ¥å‘Š

HTMLæŠ¥å‘Šæ˜¯ä¸€ä¸ªç¾è§‚çš„å¯è§†åŒ–æŠ¥å‘Šï¼ŒåŒ…å«ï¼š
- æ£€æŸ¥æ‘˜è¦å¡ç‰‡
- è¯¦ç»†çš„æ£€æŸ¥ç»“æœ
- è¯Šæ–­å»ºè®®
- æ€§èƒ½æŒ‡æ ‡å›¾è¡¨

å¯ä»¥åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€æŸ¥çœ‹ã€‚

## ğŸ” æ£€æŸ¥çš„ç«¯ç‚¹

è„šæœ¬ä¼šæ£€æŸ¥ä»¥ä¸‹ç«¯ç‚¹ï¼š

1. `/health/simple` - ç®€å•å¥åº·æ£€æŸ¥
2. `/health` - å®Œæ•´å¥åº·æ£€æŸ¥ï¼ˆåŒ…å«æ•°æ®åº“ã€APIé…ç½®ã€èµ„æºçŠ¶æ€ï¼‰
3. `/` - æ ¹è·¯å¾„
4. `/docs` - APIæ–‡æ¡£
5. `/admin/deployment/status` - éƒ¨ç½²çŠ¶æ€
6. `/admin/deployment/verify-token` - TokenéªŒè¯
7. `/statistics/daily` - æ¯æ—¥ç»Ÿè®¡
8. `/metrics` - æ€§èƒ½æŒ‡æ ‡

## ğŸ› ï¸ æ•…éšœæ’æŸ¥

### é—®é¢˜1ï¼šPythonè„šæœ¬æ— æ³•è¿è¡Œ

**é”™è¯¯ä¿¡æ¯**ï¼š`âŒ éœ€è¦å®‰è£… httpx: pip install httpx`

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
pip install httpx
```

### é—®é¢˜2ï¼šè¿æ¥é”™è¯¯ï¼ˆ502é”™è¯¯ï¼‰

**ç—‡çŠ¶**ï¼šæ‰€æœ‰ç«¯ç‚¹è¿”å›è¿æ¥é”™è¯¯

**å¯èƒ½åŸå› **ï¼š
1. æœåŠ¡æœªå¯åŠ¨æˆ–å·²å´©æºƒ
2. æœåŠ¡æ­£åœ¨éƒ¨ç½²ä¸­
3. ç½‘ç»œé—®é¢˜

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. åœ¨Zeaburæ§åˆ¶å°æ£€æŸ¥æœåŠ¡çŠ¶æ€ï¼ˆåº”è¯¥æ˜¯ "Running"ï¼‰
2. æŸ¥çœ‹æœåŠ¡æ—¥å¿—ï¼ŒæŸ¥æ‰¾é”™è¯¯ä¿¡æ¯
3. å¦‚æœæœåŠ¡åˆšéƒ¨ç½²ï¼Œç­‰å¾…1-2åˆ†é’Ÿè®©æœåŠ¡å®Œå…¨å¯åŠ¨
4. æ£€æŸ¥ç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®é…ç½®

### é—®é¢˜3ï¼šæ•°æ®åº“è¿æ¥å¤±è´¥

**ç—‡çŠ¶**ï¼šå¥åº·æ£€æŸ¥æ˜¾ç¤ºæ•°æ®åº“çŠ¶æ€ä¸º "unhealthy"

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. åœ¨Zeaburæ§åˆ¶å°æ£€æŸ¥PostgreSQLæœåŠ¡çŠ¶æ€
2. ç¡®è®¤PostgreSQLæœåŠ¡å·²è¿æ¥åˆ°åº”ç”¨æœåŠ¡
3. æ£€æŸ¥ `DATABASE_URL` ç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®
4. åœ¨Zeaburç»ˆç«¯è¿è¡Œæ•°æ®åº“è¿æ¥æµ‹è¯•

### é—®é¢˜4ï¼šæ‰¹å¤„ç†è„šæœ¬æ— æ³•æ‰¾åˆ°Python

**ç—‡çŠ¶**ï¼šæ‰¹å¤„ç†è„šæœ¬æ˜¾ç¤º "æœªæ‰¾åˆ°Python"

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. å®‰è£…Pythonï¼šhttps://www.python.org/downloads/
2. ç¡®ä¿Pythonå·²æ·»åŠ åˆ°ç³»ç»ŸPATH
3. æˆ–ä½¿ç”¨curlè¿›è¡ŒåŸºç¡€æ£€æŸ¥ï¼ˆè„šæœ¬ä¼šè‡ªåŠ¨å›é€€ï¼‰

## ğŸ“ å‘½ä»¤è¡Œå‚æ•°

### Pythonè„šæœ¬å‚æ•°

```
--url URL              åº”ç”¨URLï¼ˆé»˜è®¤: https://my-telegram-bot33.zeabur.appï¼‰
--save-report          ä¿å­˜æ£€æŸ¥æŠ¥å‘Šåˆ°JSONæ–‡ä»¶
--html-report          ç”ŸæˆHTMLæ ¼å¼çš„æŠ¥å‘Š
--report-name NAME     æŠ¥å‘Šæ–‡ä»¶åï¼ˆä¸å«æ‰©å±•åï¼Œé»˜è®¤: zeabur_check_reportï¼‰
```

### ç¤ºä¾‹

```bash
# åŸºæœ¬æ£€æŸ¥
python scripts/tools/check_zeabur_deployment.py

# æŒ‡å®šURLå¹¶ä¿å­˜æŠ¥å‘Š
python scripts/tools/check_zeabur_deployment.py --url https://my-app.zeabur.app --save-report

# ç”ŸæˆHTMLæŠ¥å‘Š
python scripts/tools/check_zeabur_deployment.py --html-report

# å®Œæ•´æ£€æŸ¥å¹¶ç”Ÿæˆæ‰€æœ‰æŠ¥å‘Š
python scripts/tools/check_zeabur_deployment.py --url https://my-app.zeabur.app --save-report --html-report --report-name deployment_check
```

## ğŸ’¡ æœ€ä½³å®è·µ

1. **å®šæœŸæ£€æŸ¥**ï¼šå»ºè®®æ¯å¤©æˆ–æ¯æ¬¡éƒ¨ç½²åè¿è¡Œæ£€æŸ¥
2. **ä¿å­˜æŠ¥å‘Š**ï¼šä½¿ç”¨ `--save-report` ä¿å­˜å†å²è®°å½•
3. **ç›‘æ§è¶‹åŠ¿**ï¼šå¯¹æ¯”ä¸åŒæ—¶é—´çš„æŠ¥å‘Šï¼Œè§‚å¯Ÿæ€§èƒ½è¶‹åŠ¿
4. **å…³æ³¨è¯Šæ–­**ï¼šæ ¹æ®è¯Šæ–­å»ºè®®åŠæ—¶è§£å†³é—®é¢˜

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Zeaburéƒ¨ç½²æŒ‡å—](../deployment/BEGINNER_DEPLOYMENT_GUIDE.md)
- [æ•°æ®åº“è¿æ¥æ£€æŸ¥](../../docs/production/CHECK_ZEABUR_DATABASE.md)
- [éƒ¨ç½²çŠ¶æ€æ£€æŸ¥](../../docs/production/CHECK_DEPLOYMENT_STATUS.md)

---

**æç¤º**ï¼šå¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ç”Ÿæˆçš„è¯Šæ–­å»ºè®®ï¼Œå®ƒä»¬ä¼šæä¾›é’ˆå¯¹æ€§çš„è§£å†³æ–¹æ¡ˆï¼

