# 修复 404: HOSTNAME_NOT_FOUND 错误

## 🔍 问题说明

404错误表示找不到对应的域名或路径。可能的原因：
1. 应用URL不正确
2. 服务还未完全部署
3. 域名还未配置
4. 服务未正常运行

## 📋 排查步骤

### 步骤1：确认正确的应用URL

#### 1.1 在Zeabur中查找应用URL

1. 访问您的Zeabur项目页面
2. 找到您的服务（service）
3. 查看以下位置：

**位置A：服务概览页面**
- 在服务名称下方
- 显示为 "Domain" 或 "域名"
- 格式：`https://xxx.zeabur.app`

**位置B：设置页面**
- 点击服务进入详情
- 找到 "Domains" 或 "域名" 标签
- 查看已配置的域名

**位置C：部署日志**
- 查看构建/部署日志
- 可能包含应用URL信息

#### 1.2 确认URL格式

- ✅ 正确：`https://your-service-name.zeabur.app`
- ❌ 错误：`http://...`（缺少s）
- ❌ 错误：`your-service-name.zeabur.app`（缺少协议）

### 步骤2：检查服务状态

#### 2.1 在Zeabur中检查

1. 在服务页面查看状态：
   - ✅ **Running** - 服务正常运行
   - ⏳ **Building** - 正在构建，请等待
   - ❌ **Failed** - 构建失败
   - ⏳ **Restarting** - 正在重启

#### 2.2 如果状态是 "Building"

**等待构建完成：**
- 通常需要3-5分钟
- 查看构建日志确认进度
- 构建完成后会自动启动服务

#### 2.3 如果状态是 "Failed"

**查看错误日志：**
1. 在服务页面找到 "Logs" 标签
2. 查看最新的错误信息
3. 根据错误信息进行修复

### 步骤3：检查域名配置

#### 3.1 确认域名已分配

在Zeabur服务页面：
1. 找到 "Domains" 或 "域名" 部分
2. 确认是否有分配的域名
3. 如果没有，Zeabur会自动分配一个

#### 3.2 等待域名生效

- 域名分配后可能需要几分钟生效
- 如果刚部署，请等待2-3分钟
- 清除浏览器缓存后重试

### 步骤4：验证服务是否运行

#### 方法1：查看服务日志

在Zeabur服务页面：
1. 找到 "Logs" 标签
2. 查看最新日志
3. 应该看到：
   ```
   INFO:     Uvicorn running on http://0.0.0.0:8000
   INFO:     Application startup complete.
   ```

#### 方法2：检查端口配置

确认服务正在监听端口：
- 应该看到 `Uvicorn running on http://0.0.0.0:8000`
- 如果看到错误，说明服务未正常启动

### 步骤5：常见问题解决

#### 问题1：服务还在构建中

**症状：** 404错误，服务状态显示 "Building"

**解决：**
- 等待构建完成（3-5分钟）
- 查看构建日志确认进度
- 不要使用旧的URL，等待新URL分配

#### 问题2：服务启动失败

**症状：** 404错误，服务状态显示 "Failed"

**可能原因：**
1. 环境变量未配置
2. 数据库连接失败
3. 代码错误

**解决：**
1. 查看构建/运行日志
2. 检查所有必需的环境变量
3. 确认数据库服务已启动
4. 修复代码错误后重新部署

#### 问题3：URL不正确

**症状：** 404错误，但服务状态是 "Running"

**解决：**
1. 在Zeabur中重新确认正确的URL
2. 确保URL包含 `https://`
3. 确保URL完全正确（没有拼写错误）
4. 尝试访问：`https://your-service-name.zeabur.app/health`

#### 问题4：域名还未生效

**症状：** 404错误，但服务已运行

**解决：**
- 等待2-3分钟让域名生效
- 清除浏览器缓存
- 尝试使用不同的浏览器
- 检查DNS是否已解析

## 🔧 快速修复步骤

### 如果服务还在构建

1. **等待构建完成**
   - 查看构建日志
   - 等待3-5分钟

2. **获取新的应用URL**
   - 构建完成后，Zeabur会显示应用URL
   - 复制正确的URL

3. **访问健康检查**
   ```
   https://new-url.zeabur.app/health
   ```

### 如果服务已运行但404

1. **确认URL正确**
   - 在Zeabur服务页面确认URL
   - 确保包含 `https://`

2. **尝试访问根路径**
   ```
   https://your-app-name.zeabur.app/
   ```

3. **尝试访问健康检查**
   ```
   https://your-app-name.zeabur.app/health
   ```

4. **尝试访问API文档**
   ```
   https://your-app-name.zeabur.app/docs
   ```

## 📋 检查清单

- [ ] 在Zeabur中确认正确的应用URL
- [ ] 服务状态为 "Running"
- [ ] URL包含 `https://`
- [ ] 等待域名生效（如刚部署）
- [ ] 清除浏览器缓存
- [ ] 查看服务日志确认无错误
- [ ] 尝试访问 `/health` 端点

## 🆘 如果仍然无法访问

### 提供以下信息以便诊断：

1. **服务状态**（Running/Building/Failed）
2. **尝试访问的完整URL**
3. **服务日志中的最新信息**
4. **构建日志中的错误信息**（如果有）

### 替代方案

如果URL一直无法访问：

1. **重新部署服务**
   - 在Zeabur项目页面
   - 找到 "Redeploy" 或 "重新部署" 选项
   - 触发重新部署

2. **检查Zeabur状态**
   - 访问：https://status.zeabur.com/
   - 确认是否有服务中断

3. **联系Zeabur支持**
   - 如果问题持续存在
   - 提供项目ID和服务ID

## 📚 相关文档

- [浏览器无法打开页面](TROUBLESHOOTING_BROWSER.md)
- [部署后操作步骤](POST_DEPLOYMENT_STEPS.md)
- [Zeabur部署指南](ZEABUR_DEPLOYMENT.md)




